<!DOCTYPE html>
<html lang="english">
<head>
  <title>exported project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta charset="utf-8"/>
  <title>Galileo Design</title>

  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,"/>
  <link rel="stylesheet" href="./style.css"/>
  <link href="./index.css" rel="stylesheet"/>

  <!-- bootstrap cdn -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
          crossorigin="anonymous"></script>

</head>
<body>

<div>
  <div class="main-container">
    <div class="galileodesign-galileodesign">
      <div class="galileodesign-depth0-frame0">

        <!-- header start -->
        <div class="header-frame1">
          <div class="header-frame2">
            <div class="header-logo-frame">
              <img
                  src="public/external/depth5frame09379-hs7o.svg"
                  alt="Depth5Frame09379"
                  class="header-logo"
              />
            </div>
            <div class="header-text-frame">
              <span class="header-text"><span>SDGB</span></span>
            </div>
          </div>
        </div>
        <!-- header end -->


        <div class="content-frame">

          <!--dropdown start-->
          <div class="dropdown">
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button"
               data-bs-toggle="dropdown" aria-expanded="false">
              Dropdown link
            </a>

            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Action</a></li>
              <li><a class="dropdown-item" href="#">Another action</a></li>
              <li><a class="dropdown-item" href="#">Something else here</a></li>
            </ul>
          </div>
          <!--dropdown end-->

          <div class="first-content-frame1">
            <div class="first-content-frame2">
              <div class="first-content-frame3">
                <div class="first-content-frame4">
                      <span class="first-content-text">
                        <span>Video analytics</span>
                      </span>
                </div>
              </div>
            </div>
          </div>

          <div class="chart-content-frame1">
            <div class="chart-container">
              <canvas style="height:auto; width:100%" id="myChart"></canvas>
            </div>
          </div>


          <div class="bottom-content-frame1">
            <div class="bottom-container">

              <!-- left yt player-->
              <div class="bottom-container-left">
                <div style="height:auto; width:100%" id="yt-player">
<!--                  test start-->
                  <div id="player"></div>
<!--                  test end-->


                </div>
              </div>

              <!-- right highlight list-->
              <div class="bottom-container-right">
                <div th:each="highlight,i : ${highlights}" class="highlight-item"
                     th:time="${highlight.time}"
                     th:onclick="playHighlight(this.getAttribute('time'))">
                  <div class="hightlight-index" th:text="${i.index+1}">index</div>
                  <div class="highlight-content">
                    <p class="highlight-summary" th:text="${highlight.voice}">voice summary</p>
                    <p class="highlight-summary" th:text="${highlight.chat}">chat summary</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
<!-- YouTube IFrame Player API 비동기 로드 -->
<script th:inline="javascript"> // 4.
  // YouTube API 스크립트 동적으로 로드
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;

  function onYouTubePlayerAPIReady() {
    // 플레이어 생성 및 설정
    player = new YT.Player('player', {
      width: '100%',
      videoId: 'xS2DmtDPB14',
      playerVars: {
        'autoplay': 0,  // 자동 재생
        'controls': 1,  // 컨트롤 숨김
        'rel': 1       // 관련 동영상 표시 안 함
      },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 플레이어 준비 시 음소거 및 재생 시작
  function onPlayerReady(event) {
    // event.target.mute();
    // event.target.playVideo();
  }

  // 플레이어 상태 변화 감지
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED) {
      console.log('동영상 재생이 종료되었습니다.');
    } else if (event.data == YT.PlayerState.PLAYING) {
      console.log('동영상이 재생 중입니다.');
    } else if (event.data == YT.PlayerState.PAUSED) {
      console.log('동영상이 일시정지되었습니다.');
    }
    // ... 추가적인 상태에 따른 동작을 정의할 수 있습니다.
  }

  // 하이라이트 클릭 시 유튜브 플레이어를 특정 시간으로 이동
  function playHighlight(time) {
    console.log(time)
    if (player && typeof player.seekTo === 'function') {
      player.seekTo(time, true);
      player.playVideo();
    }
  }
</script>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ["0:00",
        "0:46",
        "1:33",
        "2:20",
        "3:07",
        "3:53",
        "4:40",
        "5:27",
        "6:14",
        "7:00",
        "7:47",
        "8:34",
        "9:21",
        "10:08",
        "10:54",
        "11:41",
        "12:28",
        "13:15",
        "14:01",
        "14:48",
        "15:35",
        "16:22",
        "17:08",
        "17:55",
        "18:42",
        "19:29",
        "20:15",
        "21:02",
        "21:49",
        "22:36",
        "23:22",
        "24:09",
        "24:56",
        "25:43",
        "26:29",
        "27:16",
        "28:03",
        "28:50",
        "29:36",
        "30:23",
        "31:10",
        "31:57",
        "32:43",
        "33:30",
        "34:17",
        "35:04",
        "35:50",
        "36:37",
        "37:24",
        "38:11",
        "38:57",
        "39:44",
        "40:31",
        "41:18",
        "42:04",
        "42:51",
        "43:38",
        "44:25",
        "45:11",
        "45:58",
        "46:45",
        "47:32",
        "48:18",
        "49:05",
        "49:52",
        "50:39",
        "51:25",
        "52:12",
        "52:59",
        "53:46",
        "54:32",
        "55:19",
        "56:06",
        "56:53",
        "57:39",
        "58:26",
        "59:13",
        "59:59",
        "60:46",
        "61:33",
        "62:20",
        "63:06",
        "63:53",
        "64:40",
        "65:27",
        "66:13",
        "67:00"],
      datasets: [{
        label: '가장 많이 다시 본 장면',
        data: [
          0.211727974, 0, 0.014558803, 0.053960745, 0.054327551, 0.08649844, 0.1232702,
          0.432613967, 0.917227155, 1, 0.462851564, 0.296848437, 0.22796938, 0.209133166,
          0.19867782, 0.145272131, 0.15135679, 0.173801796, 0.14640835, 0.183409437, 0.251724014,
          0.413147944, 0.389369433, 0.340720577, 0.336607968, 0.274724557, 0.292960878, 0.331760555,
          0.263020947, 0.233658509, 0.235385443, 0.328449376, 0.39121676, 0.291772811, 0.333998824,
          0.275879259, 0.223960028, 0.213733363, 0.244004091, 0.257771212, 0.229319839, 0.30020825,
          0.282593468, 0.349451685, 0.263957132, 0.234357744, 0.224578146, 0.249641863, 0.223773424,
          0.225704513, 0.312316308, 0.382896918, 0.268949073, 0.299199632, 0.279255483, 0.262177286,
          0.295871343, 0.254249189, 0.189279649, 0.2091923, 0.202745398, 0.196682127, 0.200065921,
          0.204929536, 0.248959686, 0.24743893, 0.218207748, 0.177389538, 0.195876135, 0.136157081,
          0.182644795, 0.29354029, 0.411512523, 0.300945931, 0.500134295, 0.308171916, 0.398794592,
          0.392356608, 0.390459662, 0.284810453, 0.257519226, 0.203055507, 0.145076479, 0.172345411,
          0.203847344, 0.177951711, 0.142522658, 0.12777362, 0.136646328, 0.155248185, 0.141818756,
          0.148439585, 0.155783215, 0.124148859, 0.127169087, 0.12752052, 0.084668119, 0.111570997,
          0.11079767, 0.277106136
        ],
        borderWidth: 1
      }]
    },
    options: {
      responsive: false,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>